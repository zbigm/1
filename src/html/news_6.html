<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>AAECA</title>
    <link rel="stylesheet" href="./public/Styles/css/vendor.min.css">
    <link rel="stylesheet" href="./public/Styles/main.css">
    <script src="./public/Scripts/main.js"></script>
    <script src="./public/Scripts/vendor.min.js"></script>
</head>
<body>
<div class="container-fluid">
        <!-- modal -->
    <div class="wrap-news-modal">
        <div class="news-modal row">
            <a href="news_3.html" class="col-xs-4 modal-item">
                <span class="article-icon">
                    <em class="news-ico"></em>
                    <i>Article</i>
                </span>
            </a>
            <a href="news_4.html" class="col-xs-4 modal-item">
                <span class="video-icon">
                    <em class="news-ico"></em>
                    <i>Video</i>
                </span>
            </a>
            <a href="javascript:void(0);" class="col-xs-4 modal-item  active">
                <span class="recommend-icon">
                    <em class="news-ico"></em>
                    <i>Recommend</i>
                </span>
            </a>
        </div>
        <div class="wrap-logsignbtn row">
            <div class="col-xs-6 persion-btn active">
                <a class="logsignbtn" href="index_login.html">Login</a>
            </div>
            <div class="col-xs-6  persion-btn">
                <a class="logsignbtn" href="index_signup.html">Sign up</a>
            </div>
        </div>
    </div>
    <div id="loadmask"></div>
    <!-- modal -->
    <div class="container">
        <div class="row news-header padding0">
            <div class="col-xs-4 padding0">
                <span class="classify-icon">
                    <img src="./public/Images/classifyicon.png" alt="">
                </span>
                <span class="cancel-icon">
                    <img src="./public/Images/cancelicon.png" alt="">
                </span>
            </div> 
            <div class="col-xs-4">
                <img src="./public/Images/newslogo.png" alt="" class="news-logo">
            </div>
            <div class="col-xs-4 padding0">
                <span class="search-icon pull-right">
                    <a href="index_search.html">
                        <img src="./public/Images/searchicon.png" alt="">
                    </a>
                </span>
            </div>   
        </div><!-- /news-header -->
    </div><!-- /container -->
    <div class="row wrap-navbar">
        <div class="swiper-container wrap-videosubnavbar">
            <ul class="swiper-wrapper clearfix">
                <li class="swiper-slide active">
                    <a href="javascript:void(0);">
                        <span>Article</span>
                        <i>行业洞察</i>
                    </a>
                    <div class="linebottom"></div>
                </li>
                <li class="swiper-slide">
                    <a href="javascript:void(0);">
                        <span>Video</span>
                        <i>科技热点</i>
                    </a>
                    <div class="linebottom"></div>
                </li>
                <li class="swiper-slide">
                    <a href="javascript:void(0);">
                        <span>Video</span>
                        <i>前沿快讯</i>
                    </a>
                    <div class="linebottom"></div>
                </li>
            </ul>
        </div>
    </div><!-- wrap-navbar -->
    <div class="wrap-news-item">
        <ul>
            <!--<li class="news-video-item clearfix">-->
                <!--<div class="video-item-detail">-->
                    <!--<div class="wrap-news-video">-->
                        <!--<img src="./public/Images/newsvideo.png" alt="">-->
                    <!--</div>-->
                    <!--<div class="news-video-tag clearfix">-->
                        <!--<div class="pull-left clearfix">-->
                            <!--<img src="./public/Images/newspeople.png" alt="" class="pull-left icon-person">-->
                            <!--<span class="pull-left color-grey">Bo Hong</span>-->
                        <!--</div>-->
                        <!--<div class="pull-right">-->
                            <!--<span class="color-grey">August 17, 2017</span>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</li>&lt;!&ndash; news-video-item &ndash;&gt;-->
        </ul>
    </div><!-- wrap-news-item -->
</div><!-- container-fluid -->
<!--{{footer.html}}-->
<script>
    $(function () {
        console.log('jquery version:', $.fn.jquery);
        // swiper 滑动导航
        var navBarSwiper = new Swiper ('.wrap-navbar .swiper-container', {
            slidesPerView: "auto"
        });
        $(".wrap-navbar li").click(function(){
            $(this).addClass('active').siblings().removeClass('active');
        });     
        // swiper 滑动导航
        //分页加载数据
        var canload = true;
        var memberId = 1;
        var videoType = '行业洞察';
        var isRecommend = false;
        var keyword = '';
        var page = 0;
        var dropload = $('.container-fluid').dropload({
            scrollArea : window,
            threshold: 0,
            loadDownFn : function(me){
                if(!canload) {
                    $(".dropload-load").text("加载完毕");
                    return;
                }
                canload = false;
                tag = 1;
                page = page + 1;
                $.get('http://47.91.241.71:9000/Video/Search',{
                    memberId: memberId,
                    page: page,
                    videoType: videoType,
                    keyword: keyword,
                    isRecommend: isRecommend
                })
                    .done(function(data) {
                        var list = data.videos;
                        if(data.hasMore){
                            for(var i=0; i<list.length; i++) {
                                var html = '<li class="news-video-item clearfix">'
                                    + '<div class="video-item-detail">'
                                    + '<div class="wrap-news-video">'
                                    + '<a class="wrap-video-introduction" href="person_video_detail.html">'
                                    + '<img src="'+list[i].imgUrl+'" alt="" class="pull-left icon-person">'
                                    + '<img src="./public/Images/broadcast.png" alt="" class="broadcast-btn">'
                                    + '<h4>'+list[i].title+'</h4>'
                                    + '<span class="bggrey"></span>'
                                    + ' </a>'
                                    + '</div>'
                                    + '<div class="news-video-tag clearfix">'
                                    + '<div class="pull-left clearfix">'
                                    + '<img src="'+list[i].authorIconUrl+'" alt="" class="pull-left icon-person">'
                                    + '<span class="pull-left color-grey">'+list[i].author+'</span>'
                                    + '</div>'
                                    + '<div class="pull-right">'
                                    + '<span class="color-grey">'+list[i].postTime+'</span>'
                                    + '</div>'
                                    + '</div>'
                                    + '</div>'
                                    + '</li>'
                                $(".wrap-news-item ul").append(html);
                            }
                            canload = true;
                        }
                        me.resetload();
                    })
                    .fail(function(e) {
                        console.log('error', JSON.stringify(e));
                        me.resetload();
                        canload = true;
                    })
                    .always(function() {
                        //alert( "finished" );
                    });
            }
        });
        $(".wrap-videosubnavbar .swiper-slide").click(function() {
            page = 0;
            videoType = $(this).find("i").text();
            canload = true;
            $(".wrap-news-item ul").empty();
            dropload.resetload();
        })
    })
</script>
</body>
</html>