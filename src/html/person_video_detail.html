<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>AAECA</title>
    <link rel="stylesheet" href="./public/Styles/css/vendor.min.css">
    <link rel="stylesheet" href="./public/Styles/main.css">
    <script src="./public/Scripts/main.js"></script>
    <script src="./public/Scripts/vendor.min.js"></script>
    <link href="http://vjs.zencdn.net/5.19/video-js.min.css" rel="stylesheet">
    <script src="http://vjs.zencdn.net/5.19/video.min.js"></script>
    <style>
        .vjs-big-play-button {
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%);
            -webkit-transform: -webkit-translate(-50%, -50%);
        }
    </style>
</head>
<body style="display: none; padding-bottom: 0.2rem;">
<div class="container-fluid">
    <div class="wrap-news-item wrap-video-broadcast">
        <div class="news-video-item clearfix">
            <div class="video-item-detail">
                <div class="wrap-news-video video-broadcast">
                    <!-- <video id="example_video_1" class="video-js vjs-default-skin" controls preload="none" width="300" height="250"
                           poster="http://video-js.zencoder.com/oceans-clip.png"
                           data-setup="{}">
                        <source src="http://aaeca.img-us-west-1.aliyuncs.com/AAECA/6SY2njKiKp.mp4" type='video/mp4' />
                        <track kind="captions" src="demo.captions.vtt" srclang="en" label="English"></track>
                        <track kind="subtitles" src="demo.captions.vtt" srclang="en" label="English"></track>
                    </video> -->
                </div>
                <h3 class="video-broadcast-title videoTitle">Recommend articleRecommend articleRecommend articleRecommend articleRecommend article</h3>
                <div class="news-video-tag clearfix">
                    <div class="pull-left clearfix">
                        <img src="./public/Images/newspeople.png" alt="" class="pull-left icon-person authorImg">
                        <span class="pull-left color-grey authorName"></span>
                    </div>
                    <div class="pull-right">
                        <span class="color-grey authorDate"></span>
                    </div>
                </div>
            </div>
        </div><!-- news-video-item -->
    </div>

    <div class="height10"></div>
    <div class="wrap-news-item">
        <h5 class="event-title" style="padding-bottom: 0.15rem;">Recommend video</h5>
        <div class="recommendResult">

        </div>

    </div><!-- wrap-news-item -->
</div><!-- container-fluid -->
<script>
    $(function(){
        var counter = 0


        $get('/Video/GetById',{
            VideoId: location.search.split('=')[1]
        }, function (data) {
            if(data.Status == 2){
                var Body = data.First
                $(".videoTitle").text(Body.Title)
                $(".authorImg").attr("src", 'http://aaeca.img-us-west-1.aliyuncs.com/'+Body.Member.AvatarKey)
                $(".authorName").text(Body.Member.Name)
                $(".authorDate").text(fmtDate1(Body.Member.Timestamp))
                var width = $(window).width();
                var video = '<video id="example_video_1" class="video-js vjs-default-skin" controls preload="none" width="'+width+'" height="250" poster='+'http://aaeca.img-us-west-1.aliyuncs.com/'+Body.ImageKey+' data-setup="{}">' +
                        '<source src='+'http://aaeca.img-us-west-1.aliyuncs.com/'+Body.Src+' type="video/mp4" />' +
                        '<track kind="captions" src="demo.captions.vtt" srclang="en" label="English"></track>' +
                        '<track kind="subtitles" src="demo.captions.vtt" srclang="en" label="English"></track>' + 
                    '</video>'
                $(".video-broadcast").append(video);
                // $(".video-broadcast").find("video").attr("poster", 'http://aaeca.img-us-west-1.aliyuncs.com/'+Body.ImageKey)
                // $(".video-broadcast").find("source").attr("src", 'http://aaeca.img-us-west-1.aliyuncs.com/'+Body.Src)
                var myPlayer = videojs('example_video_1')

                counter++
                if(counter == 2){
                    $('body').show()
                }
            }else{
                alert(data.Message)
            }
            bool = true;
        }, function (error) {
            alert(error)
        })

        $get('/Video/Search',{
            isRecommend: true,
            publishStatus: 2,
            p: 1
        }, function (data) {
            if(data.Status == 2){
                var Body = data.Body
                if(Body && Body.length){
                    var $items = []
                    for(var i=0; i<Body.length; i++){
                        var $item = makeVideoItem(Body[i])
                        $items.push($item)
                    }
                    $('.recommendResult').append($items)
                }

                counter++
                if(counter == 2){
                    $('body').show()
                }
            }else{
                console.log(data.Message)
            }
        })
    })
</script>
</body>
</html>