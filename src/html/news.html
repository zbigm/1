<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>AAECA</title>
    <link rel="stylesheet" href="./public/Styles/css/vendor.min.css">
    <link rel="stylesheet" href="./public/Styles/main.css">
    <script src="./public/Scripts/main.js"></script>
    <script src="./public/Scripts/vendor.min.js"></script>
</head>
<body>

<div class="container-fluid ">
    <!-- modal -->
    <div class="wrap-news-modal">
        <div class="news-modal row">
            <a href="news.html" class="col-xs-4 modal-item active">
                <span class="article-icon">
                    <em class="news-ico"></em>
                    <i>Article</i>
                </span>
            </a>
            <a href="news_6.html" class="col-xs-4 modal-item">
                <span class="video-icon">
                    <em class="news-ico"></em>
                    <i>Video</i>
                </span>
            </a>
            <a href="news_3.html" class="col-xs-4 modal-item">
                <span class="recommend-icon">
                    <em class="news-ico"></em>
                    <i>Recommend</i>
                </span>
            </a>
        </div>
        <div class="wrap-logsignbtn row">
            <div class="col-xs-6 persion-btn active">
                <a class="logsignbtn" href="index_login.html">Login</a>
            </div>
            <div class="col-xs-6  persion-btn">
                <a class="logsignbtn" href="index_signup.html">Sign up</a>
            </div>
        </div>
    </div>
    <div id="loadmask"></div>
    <!-- modal -->

    <div class="container">
        <div class="row news-header padding0">
            <div class="col-xs-4 padding0">
                <span class="classify-icon">
                    <img src="./public/Images/classifyicon.png" alt="">
                </span>
                <span class="cancel-icon">
                    <img src="./public/Images/cancelicon.png" alt="">
                </span>
            </div> 
            <div class="col-xs-4">
                <img src="./public/Images/newslogo.png" alt="" class="news-logo">
            </div>
            <div class="col-xs-4 padding0">
                <span class="search-icon pull-right">
                    <a href="index_search.html">
                        <img src="./public/Images/searchicon.png" alt="">
                    </a>
                </span>
            </div>   
        </div><!-- /news-header -->
    </div><!-- /container -->
    <div class="row news-banner">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <a href="javascript:void(0);">
                        <img src="./public/Images/newsbanner1.png" alt="">
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="javascript:void(0);">
                        <img src="./public/Images/newsbanner1.png" alt="">
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="javascript:void(0);">
                        <img src="./public/Images/newsbanner1.png" alt="">
                    </a>
                </div>
            </div>
            <!-- 分页器 -->
            <div class="swiper-pagination"></div>
        </div>
    </div><!--/news-banner -->
    <div class="row wrap-navbar">
        <div class="swiper-container">
            <ul class="swiper-wrapper clearfix">
                <li class="swiper-slide active">
                    <a href="news.html">
                        <span>javascript</span>
                        <i>行业洞察</i>
                    </a>
                    <div class="linebottom"></div>
                </li>
                <li class="swiper-slide">
                    <a href="news_type2.html">
                        <span>javascript</span>
                        <i>前沿热点</i>
                    </a>
                    <div class="linebottom"></div>
                </li>
                <li class="swiper-slide">
                    <a href="news_type3.html">
                        <span>javascript</span>
                        <i>科技创新</i>
                    </a>
                    <div class="linebottom"></div>
                </li>
                <li class="swiper-slide">
                    <a href="news_type4.html">
                        <span>javascript</span>
                        <i>快乐大本营</i>
                    </a>
                    <div class="linebottom"></div>
                </li>
            </ul>
        </div>
    </div><!-- wrap-navbar -->
    <div class="wrap-news-item">
        <ul>

        </ul>
        <li class="news-item articleItemTmpl clearfix" style="display: none">
            <a href="news_detail.html" class="pull-left newsitem-img">
                <img class="articleImg" src="http://sdf.img" alt="">
            </a>
            <div class="news-item-detail pull-right">
                <h3><a href="news_detail.html?articleId=1" class="articleTitle">标题标题</a></h3>
                <p class="news-item-tag"><span class="articleTags">高科技</span></p>
                <div class="wrap-tagsnew clearfix">
                    <div class="pull-left clearfix">
                        <img src="http://bs.img" alt="" class="pull-left icon-person avatarKey">
                        <span class="pull-left color-grey articleAuthor">作者</span>
                    </div>
                    <div class="pull-right"><span class="color-grey articleDate">8/17/2015</span>
                    </div>
                </div>
            </div>
        </li>
    </div><!-- wrap-news-item -->
    <!--<div class="loader">加载完毕</div>-->
</div><!-- container-fluid -->
<!--{{footer.html}}-->
<script>
    $(function () {
        var mySwiper = new Swiper('.news-banner .swiper-container', {
            autoplay: 5000,
            loop: true,
            // 如果需要分页器
            pagination: '.swiper-pagination'
        });      
        var navBarSwiper = new Swiper ('.wrap-navbar .swiper-container', {
            slidesPerView: "auto"
        });
        $(".wrap-navbar li").click(function(){
            $(this).addClass('active').siblings().removeClass('active');
        });

        page = 1;
        var articleType = 1;
        var dropload = $('.container-fluid').dropload({
            scrollArea: window,
            loadDownFn: function (me) {
                $get('/Article/Search',{
                    p: page++,
                    articleType: articleType
                }, function (data) {
                    if(data.Status == 2){
                        var Body = data.Body
                        if(Body && Body.length){
                            var $items = []

                            for(var i=0; i<Body.length; i++){
                                var item = Body[i]
                                $items.push(makeArticleItem(item))
                            }

                            $('.wrap-news-item>ul').append($items)
                            me.resetload();

                        }else{
                            me.lock();
                            me.noData();
                            me.resetload();
                        }
                    }else{
                        page--
                        me.resetload();
                        alert(data.Message)
                    }
                }, function (error) {
                    me.resetload();
                })
            }
        })

        function makeArticleItem(dt) {
            var $item = $('.articleItemTmpl').clone().removeClass('articleItemTmpl').css('display', 'block')
            $item.find('.articleTitle').text(dt.Title)
            $item.find('.articleTitle').attr('href','news_detail.html?articleId='+dt.ArticleId)
            $item.find('.newsitem-img').attr('href','news_detail.html?articleId='+dt.ArticleId)
            $item.find('.articleDate').text(fmtDate1(dt.Timestamp))
            $item.find('.articleTags').text(dt.Keywords)
            $item.find('.articleAuthor').text(dt.Member.Name)
            $item.find('.articleImg').attr('src','http://aaeca.img-us-west-1.aliyuncs.com/'+dt.ImageKey)
            $item.find('.avatarKey').attr('src','http://aaeca.img-us-west-1.aliyuncs.com/'+dt.Member.AvatarKey)
            return $item
        }

    })
</script>
</body>
</html>