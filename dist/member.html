<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>AAECA</title>
    <link rel="stylesheet" href="./public/Styles/css/vendor.min.css">
    <link rel="stylesheet" href="./public/Styles/main.css">
    <script src="./public/Scripts/main.js"></script>
    <script src="./public/Scripts/vendor.min.js"></script>
</head>
<body>
<div class="container-fluid">
    <div class="wrap-search-title">
        <div class="wrap-search-header clearfix">
            <div class="wrap-select-box pull-left">
                <div class="input-group">
                    <div class="input-group-btn">
                        <button type="button" class="btn dropdown-toggle clearfix" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="pull-left search-text">Article</i>
                            <span class="caret select-caret pull-left">
                                <img src="./public/Images/selectico.png" alt="">
                            </span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="#">Article</a></li>
                            <li><a href="#">Video</a></li>
                            <li><a href="#">Members</a></li>
                        </ul>
                  </div><!-- /btn-group -->
                </div><!-- /input-group -->
            </div>
            <div class="wrap-search-text pull-right clearfix">
                <span class="input-group-icon pull-left">
                    <img src="./public/Images/lightsearch.png" alt="">
                </span>
                <input type="text" class="input-group-control pull-left" placeholder="Username">
            </div>
        </div><!-- wrap-search-header -->
    </div><!-- wrap-search-title -->
    <div class="wrap-member-introduction clearfix">
        <div class="pull-left member-introduction-img">
            <a href="javascript:void(0);">
                <img src="./public/Images/member.png" alt="">
            </a>
        </div>
        <div class="pull-right member-introduction-text">
            <h3>鲍曼</h3>
            <h4>Chairwoman,AAECA</h4>
            <p>美亚经济文化协会是一个非盈利性机构，本人很容幸成为AAECA临时会长。
发展美亚经济文化，共创双赢桥梁。协会通过各种双边的经济文化交流活动，促进美洲与中国及其他亚洲国家政府之间，企业之间，以及各类专业人士之间的经济，文化往来，从而为美、亚两洲各国的经济文化发展事业做出应有的贡献。</p>
        </div>
    </div>
    <div class="row wrap-navbar member-navbar">
        <div class="swiper-container">
            <ul class="swiper-wrapper clearfix">
                <li class="swiper-slide active">
                    <b>All</b>
                    <div class="linebottom"></div>
                </li>
                <li class="swiper-slide">
                    <b>Secretary General</b>
                    <div class="linebottom"></div>
                </li>
                <li class="swiper-slide">
                    <b>Diretors</b>
                    <div class="linebottom"></div>
                </li>
                <li class="swiper-slide">
                    <b>Members</b>
                    <div class="linebottom"></div>
                </li>
            </ul>
        </div>
    </div><!-- wrap-navbar -->
    <div class="wrap-member-type-box">
        <div class="wrap-search-type container  member-type swiper-container">
            <ul class="wrap-searchtag clearfix swiper-wrapper">
                <a href="javascript:void(0);" class="swiper-slide tagbtn pull-left">Insight</a>
                <a href="javascript:void(0);" class="swiper-slide tagbtn pull-left">TopNews</a>
                <a href="javascript:void(0);" class="swiper-slide tagbtn pull-left">TechExpress</a>
                <a href="javascript:void(0);" class="swiper-slide tagbtn pull-left">Project</a>
            </ul>
        </div><!-- wrap-search-type -->
    </div><!-- wrap-member-type-box -->
    <div class="wrap-member-list container">
        <ul class="clearfix">
            <!-- <li class="pull-left col-xs-6 member-list-item">
                <a class="person-item clearfix" href="member_article.html">
                    <div class="pull-left member-trait">
                        <img src="./public/Images/submember.png" alt="">
                    </div>
                    <div class="person-item-text pull-left">
                        <span>鲍曼</span>
                        <i>Mobile Inter...</i>
                    </div>
                </a>
            </li> -->
        </ul>
    </div><!-- wrap-member-list -->
</div><!-- container-fluid -->
<div class="wrap-footer">
    <div class="container">
        <ul class="row">
            <li class="col-xs-3 active">
                <a href="index.html">
                    <span class="home-footer"></span>
                    <i>Home</i>
                </a>
            </li>
            <li class="col-xs-3">
                <a href="news.html">
                    <span class="news-footer"></span>
                    <i>News</i>
                </a>
            </li>
            <li class="col-xs-3">
                <a href="member.html">
                    <span class="members-footer"></span>
                    <i>Members</i>
                </a>
            </li>
            <li class="col-xs-3">
                <a href="person_not_loggedin.html">
                    <span class="me-footer"></span>
                    <i>Me</i>
                </a>
            </li>
        </ul>
    </div>
</div>
<script>
    $(function () {
        console.log('jquery version:', $.fn.jquery);
        // swiper 滑动导航
        var navBarSwiper = new Swiper ('.wrap-navbar .swiper-container', {
            slidesPerView: "auto"
        });
        var navBarSwiper = new Swiper ('.wrap-member-type-box .swiper-container', {
            slidesPerView: "auto"
        });
        $(".wrap-navbar li").click(function(){
            $(this).addClass('active').siblings().removeClass('active');
        });     
        // swiper 滑动导航
        // memberType,  0 1 2 3  all
        //     memberLevel,
        //     keyword,
        //     tagId,
        //     page
        // 数据加载
        var canload = true;
        var memberType = 0;
        var memberLevel = '';
        var tagId="";
        var isRecommend = false;
        var keyword = '';
        var page = 0;
        var dropload = $('.container-fluid').dropload({
            scrollArea : window,
            threshold: 0,
            loadDownFn : function(me){
                if(!canload) {
                    $(".dropload-load").text("加载完毕");
                    return;
                }
                canload = false;
                tag = 1;
                page = page + 1;
                $.get('http://47.91.241.71:9000/Account/Search',{
                    memberType: memberType,
                    memberLevel:memberLevel,
                    page: page,
                    tagId: tagId,
                    keyword: keyword,
                    isRecommend: isRecommend
                })
                .done(function(data) {
                    var list = data.accounts;
                    if(data.hasMore){
                        for(var i=0; i<list.length; i++) {
                            var datatagshtml=list[i].tag.join(' ');
                            var html = '<li class="pull-left col-xs-6 member-list-item">'
                                + '<a class="person-item clearfix" href="member_article.html">'
                                + '<div class="pull-left member-trait">'
                                + '<img src="'+list[i].imgUrl+'" alt="">'
                                + '</div>'
                                + '<div class="person-item-text pull-left">'
                                + '<span>'+list[i].name+'</span>'
                                + '<i>'+datatagshtml+'</i>'
                                + '</div>'
                                + '</a>'
                                + '</li>';
                            $(".wrap-member-list ul").append(html);
                        }
                        canload = true;
                    }
                    me.resetload();
                })
                .fail(function(e) {
                    console.log('error', JSON.stringify(e));
                    me.resetload();
                    canload = true;
                })
                .always(function() {
                    //alert( "finished" );
                });
            }
        });
        // 数据加载
        $(".wrap-navbar .swiper-slide").click(function() {
            page = 0;
            articleType = $(this).find("i").text();
            canload = true;
            $(".wrap-news-item ul").empty();
            dropload.resetload();
        })
    })
</script>
</body>
</html>