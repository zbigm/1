<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>AAECA</title>
    <link rel="stylesheet" href="./public/Styles/css/vendor.min.css">
    <link rel="stylesheet" href="./public/Styles/main.css">
    <script src="./public/Scripts/main.js"></script>
    <script src="./public/Scripts/vendor.min.js"></script>
</head>
<body>

<div class="container-fluid ">
    <!-- modal -->
    <div class="wrap-news-modal">
        <div class="news-modal row">
            <a href="news_3.html" class="col-xs-4 modal-item active">
                <span class="article-icon">
                    <em class="news-ico"></em>
                    <i>Article</i>
                </span>
            </a>
            <a href="news_4.html" class="col-xs-4 modal-item">
                <span class="video-icon">
                    <em class="news-ico"></em>
                    <i>Video</i>
                </span>
            </a>
            <a href="news_6.html" class="col-xs-4 modal-item">
                <span class="recommend-icon">
                    <em class="news-ico"></em>
                    <i>Recommend</i>
                </span>
            </a>
        </div>
        <div class="wrap-logsignbtn row">
            <div class="col-xs-6 persion-btn active">
                <a class="logsignbtn" href="index_login.html">Login</a>
            </div>
            <div class="col-xs-6  persion-btn">
                <a class="logsignbtn" href="index_signup.html">Sign up</a>
            </div>
        </div>
    </div>
    <div id="loadmask"></div>
    <!-- modal -->

    <div class="container">
        <div class="row news-header padding0">
            <div class="col-xs-4 padding0">
                <span class="classify-icon">
                    <img src="./public/Images/classifyicon.png" alt="">
                </span>
                <span class="cancel-icon">
                    <img src="./public/Images/cancelicon.png" alt="">
                </span>
            </div> 
            <div class="col-xs-4">
                <img src="./public/Images/newslogo.png" alt="" class="news-logo">
            </div>
            <div class="col-xs-4 padding0">
                <span class="search-icon pull-right">
                    <a href="index_search.html">
                        <img src="./public/Images/searchicon.png" alt="">
                    </a>
                </span>
            </div>   
        </div><!-- /news-header -->
    </div><!-- /container -->
    <div class="row news-banner">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <a href="javascript:void(0);">
                        <img src="./public/Images/newsbanner1.png" alt="">
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="javascript:void(0);">
                        <img src="./public/Images/newsbanner1.png" alt="">
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="javascript:void(0);">
                        <img src="./public/Images/newsbanner1.png" alt="">
                    </a>
                </div>
            </div>
            <!-- 分页器 -->
            <div class="swiper-pagination"></div>
        </div>
    </div><!--/news-banner -->
    <div class="row wrap-navbar">
        <div class="swiper-container">
            <ul class="swiper-wrapper clearfix">
                <li class="swiper-slide active">
                    <a href="javascript:void(0);">
                        <span>javascript</span>
                        <i>行业洞察</i>
                    </a>
                    <div class="linebottom"></div>
                </li>
                <li class="swiper-slide">
                    <a href="javascript:void(0);">
                        <span>javascript</span>
                        <i>前沿热点</i>
                    </a>
                    <div class="linebottom"></div>
                </li>
                <li class="swiper-slide">
                    <a href="javascript:void(0);">
                        <span>javascript</span>
                        <i>科技创新</i>
                    </a>
                    <div class="linebottom"></div>
                </li>
                <li class="swiper-slide">
                    <a href="javascript:void(0);">
                        <span>javascript</span>
                        <i>快乐大本营</i>
                    </a>
                    <div class="linebottom"></div>
                </li>
            </ul>
        </div>
    </div><!-- wrap-navbar -->
    <div class="wrap-news-item">
        <ul>

        </ul>
    </div><!-- wrap-news-item -->
    <!--<div class="loader">加载完毕</div>-->
</div><!-- container-fluid -->
<div class="wrap-footer">
    <div class="container">
        <ul class="row">
            <li class="col-xs-3 active">
                <a href="index.html">
                    <span class="home-footer"></span>
                    <i>Home</i>
                </a>
            </li>
            <li class="col-xs-3">
                <a href="news.html">
                    <span class="news-footer"></span>
                    <i>News</i>
                </a>
            </li>
            <li class="col-xs-3">
                <a href="member.html">
                    <span class="members-footer"></span>
                    <i>Members</i>
                </a>
            </li>
            <li class="col-xs-3">
                <a href="person_not_loggedin.html">
                    <span class="me-footer"></span>
                    <i>Me</i>
                </a>
            </li>
        </ul>
    </div>
</div>
<script>
    $(function () {
        console.log('jquery version:', $.fn.jquery);
        // swiper 轮播图
        var mySwiper = new Swiper('.news-banner .swiper-container', {
            autoplay: 5000,
            loop: true,
            // 如果需要分页器
            pagination: '.swiper-pagination'
        });      
        // swiper 轮播图
        // swiper 滑动导航
        var navBarSwiper = new Swiper ('.wrap-navbar .swiper-container', {
            slidesPerView: "auto"
        });
        $(".wrap-navbar li").click(function(){
            $(this).addClass('active').siblings().removeClass('active');
        });     
        // swiper 滑动导航
        //加载第一页
        var canload = true;
        var memberId = 1;
        var articleType = '行业洞察';
        var isRecommend = false;
        var keyword = '';
        var page = 0;
        var dropload = $('.container-fluid').dropload({
            scrollArea : window,
            threshold: 0,
            loadDownFn : function(me){
                if(!canload) {
                    $(".dropload-load").text("加载完毕");
                    return;
                }
                canload = false;
                tag = 1;
                page = page + 1;
                $.get('http://47.91.241.71:9000/Article/Search',{
                    memberId: memberId,
                    page: page,
                    articleType: articleType,
                    keyword: keyword,
                    isRecommend: isRecommend
                })
                .done(function(data) {
                    var list = data.articles;
                    if(data.hasMore){
                        for(var i=0; i<list.length; i++) {
                            var html = '<li class="news-item clearfix">'
                                + '<a href="news_detail.html" class="pull-left newsitem-img">'
                                + '<img src="'+list[i].imgUrl+'" alt="">'
                                + '</a>'
                                + '<div class="news-item-detail pull-right">'
                                + '<h3><a href="news_detail.html?articleId='+1+'">'+list[i].title+'</a></h3>'
                                + '<p class="news-item-tag">'
                                + '<span>高科技</span>'
                                + '</p>'
                                + '<div class="wrap-tagsnew clearfix">'
                                + '<div class="pull-left clearfix">'
                                + '<img src="'+list[i].authorIconUrl+'" alt="" class="pull-left icon-person">'
                                + '<span class="pull-left color-grey">'+list[i].author+'</span>'
                                + '</div>'
                                + '<div class="pull-right">'
                                + '<span class="color-grey">'+list[i].postTime+'</span>'
                                + '</div>'
                                + '</div>'
                                + '</div>'
                                + '</li>';
                            $(".wrap-news-item ul").append(html);
                        }
                        canload = true;
                    }
                    me.resetload();
                })
                .fail(function(e) {
                    console.log('error', JSON.stringify(e));
                    me.resetload();
                    canload = true;
                })
                .always(function() {
                    //alert( "finished" );
                });
            }
        });
        $(".wrap-navbar .swiper-slide").click(function() {
            page = 0;
            articleType = $(this).find("i").text();
            canload = true;
            $(".wrap-news-item ul").empty();
            dropload.resetload();
        })
    })
</script>
</body>
</html>